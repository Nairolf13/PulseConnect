{% extends "../layouts/base.twig" %}

{% block style %}
	<link rel="stylesheet" href="/../../assets/css/reset-password.css">
{% endblock %}

{% block title %}
	<title>{{title}}</title>
{% endblock %}

{% block main %}
	<form id="resetPasswordForm">
		<input type="hidden" id="token" name="token" value="{{ token }}">
		<label for="newPassword">Nouveau mot de passe :</label>
		<input type="password" id="newPassword" name="newPassword" placeholder="Entrez votre nouveau mot de passe" required>
		<label for="confirmPassword">Confirmez le mot de passe :</label>
		<input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirmez votre mot de passe" required>
		<button type="submit">RÃ©initialiser le mot de passe</button>
		<a href="/login">Annuler</a>
	</form>

	{% include "../partials/error.twig" %}
{% endblock %}

{% block script %}
<script type="module">
    import { handleFetch } from '/../../assets/js/error.js';

    document.getElementById('resetPasswordForm').addEventListener('submit', (event) => {
        event.preventDefault(); 

        const token = document.getElementById('token').value;
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;
    
        handleFetch('/reset-password', { 
            token, 
            newPassword, 
            confirmPassword 
        });
    });
</script>
{% endblock %}
